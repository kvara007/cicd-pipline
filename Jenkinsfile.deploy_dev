pipeline {
    agent any
    stages {
        stage('Deploy to Dev') {
            steps {
                script {
                    def imageName = "kvara007/nodedev:v1.0"
                    def containerName = "node-dev"
                    sh "docker stop ${containerName} || true"
                    sh "docker rm ${containerName} || true"
                    sh "docker pull ${imageName}"
                    sh "docker run -d --name ${containerName} -p 3001:3000 ${imageName}"
                }
            }
        }
    }
}

